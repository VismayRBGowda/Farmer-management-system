{% extends 'base.html' %}
{% block title %}
Add Crops
{% endblock title %}

{% block body %}
<h3 class="text-center"><span>Add Crops</span> </h3>

{% with messages=get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
        {{message}}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<br>
<div class="container">
  <div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4">
      <form action="/crops" method="post">
        <div class="form-group">
          <label for="type">Crop Type</label>
          <input type="text" class="form-control" name="type" id="type" required>
        </div>
        <br>
        <div class="form-group">
          <label for="type">Land ID</label>
          <input type="text" class="form-control" name="land_id" id="land_id" required>
        </div>
        <br>
        <div class="form-group">
          <label for="planting_date">Planting Date</label>
          <input type="date" class="form-control" name="planting_date" id="planting_date" required>
        </div>
        <br>
        <div class="form-group">
          <label for="harvest_date">Harvest Date</label>
          <input type="date" class="form-control" name="harvest_date" id="harvest_date" required>
        </div>
        <br>
        <div class="form-group">
          <label for="expected_yield">Expected Yield (kg/ha)</label>
          <input type="number" class="form-control" name="expected_yield" id="expected_yield" required>
        </div>
        <br>
        <div class="form-group">
          <label for="actual_yield">Actual Yield (kg/ha)</label>
          <input type="number" class="form-control" name="actual_yield" id="actual_yield" required>
        </div>
        <br>
        <div class="form-group">
          <label for="fertilizers_used">Fertilizers Used</label>
          <input type="text" class="form-control" name="fertilizers_used" id="fertilizers_used" required>
        </div>
        <br>
        <button type="submit" class="btn btn-success btn-block">Add Crop</button>
      </form>
      <br>
      <br>
    </div>
    <div class="col-md-4"></div>
  </div>
</div>

<div class="container mt-3">
  <table class="table">
    <thead class="thead-light">
      <tr>
        <th scope="col">Crop ID</th>
        <th scope="col">Land ID</th>
        <th scope="col">Crop Type</th>
        <th scope="col">Planting date</th>
        <th scope="col">Harvesting date</th>
        <th scope="col">Expected yield</th>
        <th scope="col">Actual yield</th>
        <th scope="col">Fertilizers Used</th>
      </tr>
    </thead>
    <tbody>
    {% for post in query %}
      <tr>
        <th scope="row">{{post.crop_id}}</th>
        <td>{{post.land_id}}</td>
        <td>{{post.crop_type}}</td>
        <td>{{post.planting_date}}</td>
        <td>{{post.harvest_date}}</td>
        <td>{{post.expected_yield}}</td>
        <td>{{post.actual_yield}}</td>
        <td>{{post.fertilizers_used}}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

{% endblock body %}
